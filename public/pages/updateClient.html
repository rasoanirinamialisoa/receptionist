<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" type="image/png" href="../assets/img/AKORY (3) - Copy.png">
  <title>
    AKORY-HOTEL-ADMIN
  </title>

  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <link rel="stylesheet" href="../assets/css/dropomenu.css">
  <link id="pagestyle" href="../assets/css/soft-ui-dashboard.css?v=1.0.7" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
  
  <script src="../js/scrollmenus.js" defer></script>
  <script src="../js/crud.js" defer></script>

</head>

<body class="sidenav-show  bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 "
  id="sidenav-main">
  <div class="sidenav-header">
    <a class="m-0" href=" hotel.html ">
      <img src="../assets/img/AKORY (3) - Copy.png" class="h-200 logo " alt="main_logo">
     
    </a>
  </div>
  <hr class="horizontal dark mt-0">

  <div class="sidebar descend" id="sidebar">
    <div class="sidebar-inner slimscroll">
      <div id="sidebar-menu" class="sidebar-menu">
        <ul>
          <li class="active"> <a href="dashboard.html"><i class="fas fa-columns"></i>
              <span> Tableau de bord </span></a> </li>
          <li class="list-divider"></li>
          <li class="submenu"> <a href="#"></i> <i class="bi-people"></i> <span> Clients </span> <span
                class="menu-arrow"></span></a>
            <ul class="submenu_class none">
              <li><a href="allClient.html"> Tous les clients </a></li>
              <li><a href="addClient.html"> Ajouter </a></li>
              <li><a href="updateClient.html"> Modifier </a></li>
            </ul>
          </li>
          <li class="submenu"> <a href="#"><i class="fas fa-book"></i> <span> Réservation </span> <span
                class="menu-arrow"></span></a>
            <ul class="submenu_class none">
              <li><a href="allBook.html"> Toutes les réservations </a></li>
              <li><a href="addBook.html"> Ajouter </a></li>
              <li><a href="updateBook.html"> Modifier </a></li>
            </ul>
          </li>
          <li class="submenu"> <a href="#"><i class="bi-door-open"></i> <span> Chambres </span> <span
                class="menu-arrow"></span></a>
            <ul class="submenu_class none">
              <li><a href="allRooms.html"> Tous les chambres </a></li>
              <li><a href="addRooms.html"> Ajouter </a></li>
              <li><a href="updateRoom.html"> Modifier </a></li>
            </ul>
          </li>
          <li class="submenu"> <a href="#"><i class="bi-person-badge"></i> <span> Employees </span> <span
                class="menu-arrow"></span></a>
            <ul class="submenu_class none">
              <li><a href="allEmployee.html"> Tous les employees </a></li>
              <li><a href="addEmployee.html"> Ajouter </a></li>
              <li><a href="updateEmployee.html"> Supprimer </a></li>
            </ul>
          </li>
          </li>
          <li class="submenu"> <a href="#"><i class="bi-cash"></i> <span> Comptes </span>
              <span class="menu-arrow"></span></a>
            <ul class="submenu_class none">
              <li><a href="payment.html"> Paiements </a></li>
              <li><a href="modePayement.html"> Méthodes de paiements</a></li>
            </ul>
          </li>

          <li class="submenu"> <a href="#"><i class="bi-cash"></i> <span> Offres </span>
            <span class="menu-arrow"></span></a>
          <ul class="submenu_class none">
            <li><a href="promotion.html"> Promotions </a></li>
            <li><a href="offreSaisonner.html"> Offes Saisonner</a></li>
          </ul>
        </li>
        
        <li class="submenu"> <a href="#"><i class="bi-cash"></i> <span> Hotel </span>
          <span class="menu-arrow"></span></a>
        <ul class="submenu_class none">
          <li><a href="allHotel.html"> Tous les hotels </a></li>
          <li><a href="addHotel.html"> Ajouter </a></li>
        </ul>
      </li>
          
          <li class="submenu"> <a href="services.html"><i class="bi bi-display"></i> <span> Services </span></a>
          </li>
        
          <li class="submenu"> <a href="offres.html"><i class="bi bi-display"></i> <span> Offres </span></a>
          </li>
        </ul>
      </div>
    </div>
  </div>

</aside>


<main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
  <div class="container position-sticky z-index-sticky top-0">
    <div class="row">
      <div class="col-12">
        <!-- Navbar -->
        <nav
          class="navbar navbar-expand-lg blur blur-rounded top-0 z-index-3 shadow position-absolute my-3 py-2 start-0 end-0 mx-4">
          <div class="container">
      <a class="navbar-brand font-weight-bolder ms-lg-0 ms-3 text-dark" href="../pages/dashboard.html">
        AKORY HOTEL
      </a>
      <button class="navbar-toggler shadow-none ms-2" type="button" data-bs-toggle="collapse"
        data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon mt-2">
          <span class="navbar-toggler-bar bar1"></span>
          <span class="navbar-toggler-bar bar2"></span>
          <span class="navbar-toggler-bar bar3"></span>
        </span>
      </button>
      <div class="collapse navbar-collapse" id="navigation">
        <ul class="navbar-nav mx-auto ms-xl-auto me-xl-7">
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center me-2 active" aria-current="page"
              href="../pages/dashboard.html">
              <i class="fa fa-chart-pie opacity-6  me-1"></i>
              Tableau de bord
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link me-2" href="profile.html">
              <i class="fa fa-user opacity-6  me-1"></i>
              Profile
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link me-2" href="sign-up.html">
              <i class="fas fa-user-circle opacity-6  me-1"></i>
              Inscrivez-vous
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link me-2" href="sign-in.html">
              <i class="fas fa-key opacity-6  me-1"></i>
              Connecter
            </a>
          </li>
        </ul>
        <li class="nav-item d-flex align-items-center">
          <a class="btn btn-round btn-sm mb-0 btn-outline-primary me-2" target="_blank"
            href="votreCompte.html"> Votre compte </a>
        </li>
        <ul class="navbar-nav d-lg-block d-none">
          <li class="nav-item">
            <a href="enSavoirPlus.html"
              class="btn btn-sm btn-round mb-0 me-1 bg-gradient-dark"> En savoir plus  </a>
          </li>
        </ul>
      </div>
    </div>
        </nav>
        <!-- End Navbar -->
      </div>
    </div>
  </div>
    <!-- VOUS POUVEZ CREER LA FORMULAIRE ICI -->
    <div class="container descend2">
      <div class="row justify-content-center">
        <div class="col-lg-6">
          <div class="card">
            <div class="card-header bg-gradient-primary text-white">
              Modifier un client
            </div>
            <div class="card-body">

              <form id="updateClientForm">
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="name" class="form-label">Nom</label>
                    <input type="text" class="form-control" id="name" name="name" required>
                  </div>
                  <div class="col-md-6">
                    <label for="last_name" class="form-label">Prénom</label>
                    <input type="text" class="form-control" id="last_name" name="last_name" required>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="principal_contact" class="form-label">Contact principal</label>
                    <input type="contact" class="form-control" id="principal_contact" name="principal_contact" required>
                  </div>
                  <div class="col-md-6">
                    <label for="address" class="form-label">Adresse</label>
                    <input type="text" class="form-control" id="address" name="address" required>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="emergency_number" class="form-label">Numéro d'urgence</label>
                    <input type="text" class="form-control" id="emergency_number" name="emergency_number" required>
                  </div>
                  <div class="col-md-6">
                    <label for="gender" class="form-label" >Genre</label>
                    <select class="form-select" id="gender" name="gender" required>
                      <option value="M">M</option>
                      <option value="F">F</option>
                    </select>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="cin" class="form-label">Numéro de CIN</label>
                    <input type="text" class="form-control" id="cin" name="cin" required>
                  </div>
                  <div class="col-md-6">
                    <label for="email" class="form-label">Adresse e-mail</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                  </div>
                </div>
                <button type="submit" class="btn btn-primary"> Mettre à jour </button>
                <br>
                <p><a href="index.html">Retour à la liste des clients</a></p>
              </form>

            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/drop.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="../assets/js/soft-ui-dashboard.min.js?v=1.0.7"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  
  <script>
    // Récupérer l'ID du client à partir des paramètres de l'URL
    const urlParams = new URLSearchParams(window.location.search);
    const id_client = urlParams.get('id');
  
    // Fonction pour récupérer les informations du client à modifier
    function getClientDetails(id_client) {
      axios.get(`/client/${id_client}`)
        .then(response => {
          const client = response.data;
          document.getElementById('name').value = client.name;
          document.getElementById('last_name').value = client.last_name;
          document.getElementById('principal_contact').value = client.principal_contact;
          document.getElementById('address').value = client.address;
          document.getElementById('emergency_number').value = client.emergency_number;
          document.getElementById('gender').value = client.gender;
          document.getElementById('cin').value = client.cin;
          document.getElementById('email').value = client.email;
        })
        .catch(error => {
          console.error('Erreur lors de la récupération du client:', error);
        });
    }
  
    // Appeler getClientDetails() pour afficher les informations du client au chargement de la page
    getClientDetails(id_client);
  
    // Fonction pour mettre à jour le client
    document.getElementById('updateClientForm').addEventListener('submit', function (event) {
      event.preventDefault();
  
      const name = document.getElementById('name').value;
      const last_name = document.getElementById('last_name').value;
      const principal_contact = document.getElementById('principal_contact').value;
      const address = document.getElementById('address').value;
      const emergency_number = document.getElementById('emergency_number').value;
      const gender = document.getElementById('gender').value;
      const CIN = document.getElementById('cin').value;
      const Email = document.getElementById('email').value;
  
      // Envoyer les informations mises à jour au serveur
      axios.put(`/client/${id_client}`, {
          name,
          last_name,
          principal_contact,
          address,
          emergency_number,
          gender,
          cin,
          email
        })
        .then(() => {
          // Rediriger vers la page allClient.html après la mise à jour du client
          window.location.href = '/allClient.html';
        })
        .catch(error => {
          console.error('Erreur lors de la mise à jour du client:', error);
        });
    });
  </script>
  
</body>

</html>